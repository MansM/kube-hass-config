homeassistant:
  # Name of the location where Home Assistant is running
  name: Home
  unit_system: metric
  elevation: 0
  latitude: !secret latitude
  longitude: !secret longitude
  time_zone: Europe/Amsterdam
  packages: !include_dir_named packages
  customize: !include customize.yaml

default_config:
group:          !include_dir_merge_named groups
stream:

hue:
  bridges:
    - host: !secret hue.ip
      allow_unreachable: true
      allow_hue_groups: true

sensor:
  - platform: growatt_server
    username: !secret growatt.user
    password: !secret growatt.pass
  
  - platform: github
    access_token: !secret github_access_token
    repositories:
      - path: 'home-assistant/home-assistant'
      - path: 'containous/traefik'

  - platform: thinkingcleaner
    host: 10.0.2.206

  - platform: netdata
    host: '10.0.2.24'
    port: '19999'
    name: r710top
    resources:
      cpu:
        data_group: system.cpu
        element: idle
        invert: true

  - platform: template
    sensors:
      octoprint_time_elapsed_format:
        friendly_name: 'Printing Time Elapsed'
        value_template: >-
           {% set etime = states.sensor.octoprint_time_elapsed.state | int %}
           {% set seconds = etime % 60 %}
           {% set minutes = ((etime % 3600) / 60) | int %}
           {% set hours = ((etime % 86400) / 3600) | int %}
           {% set days = (etime / 86400) | int %}
           {%- if days > 0 -%}
             {%- if days == 1 -%}
               1 day
             {%- else -%}
               {{ days }} days
             {%- endif -%}
             {{ ', ' }}
           {%- endif -%}
           {%- if hours > 0 -%}
             {%- if hours == 1 -%}
               1 hour
             {%- else -%}
               {{ hours }} hours
             {%- endif -%}
             {{ ', ' }}
           {%- endif -%}
           {%- if minutes > 0 -%}
             {%- if minutes == 1 -%}
               1 minute
             {%- else -%}
               {{ minutes }} minutes
             {%- endif -%}
           {%- endif -%}
      octoprint_time_remaining_format:
        friendly_name: 'Printing Time Remaining'
        value_template: >-
          {% set rtime = states.sensor.octoprint_time_remaining.state | int %}
          {% set seconds = rtime % 60 %}
          {% set minutes = ((rtime % 3600) / 60) | int %}
          {% set hours = ((rtime % 86400) / 3600) | int %}
          {% set days = (rtime / 86400) | int %}
          {%- if days > 0 -%}
            {%- if days == 1 -%}
              1 day
            {%- else -%}
              {{ days }} days
            {%- endif -%}
            {{ ', ' }}
          {%- endif -%}
          {%- if hours > 0 -%}
            {%- if hours == 1 -%}
              1 hour
            {%- else -%}
              {{ hours }} hours
            {%- endif -%}
            {{ ', ' }}
          {%- endif -%}
          {%- if minutes > 0 -%}
            {%- if minutes == 1 -%}
              1 minute
            {%- else -%}
              {{ minutes }} minutes
            {%- endif -%}
          {%- endif -%}
# http:
# frontend:
switch:
  - platform: thinkingcleaner
    host: 10.0.2.206

person:
  - name: mans
    id: !secret mans.id
    device_trackers:
      - device_tracker.iphone_van_mans
      - device_tracker.iphone_van_mans_2
  - name: rianne
    id: !secret rianne.id
    device_trackers:
      - device_tracker.cat7

webostv:
  name: Woonkamer TV
  host: !secret tv.ip

  # - platform: denon
  #   name: marantz_sr7005
  #   host: !secret marantz.ip
  #   #mac: !secret marantz.mac

lovelace:
  mode: yaml

# notify:
#   - platform: webostv
#     host: !secret tv.ip
#     name: media_player.woonkamer_tv
#     filename: webostv.conf

camera:
  - platform: generic
    name: camera
    still_image_url: !secret camera.snap
    stream_source: !secret camera.url
    verify_ssl: false
  
mqtt:
  broker: mosquitto.mqtt.svc
  discovery: true

octoprint:
  host: !secret octoprint.host
  api_key: !secret octoprint.apikey
  bed: true
  number_of_tools: 1
  sensors:
    monitored_conditions:
      - 'Current State'
      - 'Job Percentage'
      - 'Temperatures'
      - 'Time Elapsed'
      - 'Time Remaining'

plant:
  keuken_plant:
    sensors:
      moisture: sensor.mi_flora_moisture
      battery: sensor.mi_flora_battery
      temperature: sensor.mi_flora_temperature
      conductivity: sensor.mi_flora_conductivity
      brightness: sensor.mi_flora_light_intensity
    min_moisture: 20

cast:
  media_player:
    - host: 10.0.2.75

recorder:
  purge_keep_days: 14
  db_url: !secret postgres.url
  db_max_retries: 50
  db_retry_wait: 10

  